<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<th:block th:fragment="header">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/header.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <nav>
        <div>
            <a></a>
            <p style="text-align: center;">헤더입니다. 업데이트 예정입니다.
                로고, 검색창, 판매글 쓰기 링크, 알림 아이콘, 채팅 아이콘, 프로필 아이콘이 삽입될 예정입니다</p><hr>
        </div>
    <!--상단 div는 필요 없는게 확인 될 경우 지우면 됩니다.-->
    <div id="menu">
        <ul>
            <!-- ★ 로고 -->
            <li class="logo">
                <h1>
                    Second Share
                </h1>
            </li>

            <!-- ★ 검색창 -->
            <li class="search">
                <div>
                    <form id="search" name="search" method="GET" action="/board/list">
                        <select id="typeSelect" name="type">
                            <option value="제목" th:selected="${type == '제목'}">제목</option>
                            <option value="생활용품" th:selected="${type == '생활용품'}">생활용품</option>
                            <option value="패션의류" th:selected="${type == '패션의류'}">패션의류</option>
                            <option value="가전제품" th:selected="${type == '가전제품'}">가전제품</option>
                            <option value="스포츠용품" th:selected="${type == '스포츠용품'}">스포츠용품</option>
                            <option value="도서/음반/DVD" th:selected="${type == '도서/음반/DVD'}">도서/음반/DVD</option>
                            <option value="문구/오피스" th:selected="${type == '문구/오피스'}">문구/오피스</option>
                        </select>
                        <input type="text" id="keywordInput" name="keyword" placeholder="검색어를 입력하세요"/>
                        <input type="submit" id="searchButton" class="btn btn-outline-primary mr-2" value="검색" />
                    </form>
                </div>
                </a>
            </li>

            <!-- ★ 판매글 작성 -->
            <li class="write">
                <a th:href="@{/board/write}">
                    <img width="48" height="48" src="https://img.icons8.com/fluency-systems-regular/48/create-new.png" alt="write"/>
                    판매글 작성하기
                </a>
            </li>

            <!-- ★ 알림 -->
            <li class="notification">
                <a href="#">
                    <img width="48" height="48" src="https://img.icons8.com/fluency-systems-regular/48/appointment-reminders--v1.png" alt="notification"/>
                </a>
            </li>

            <!-- ★ 프로필 -->
            <li class="profile">
                <a href="#">
                    <img width="48" height="48" src="https://img.icons8.com/fluency-systems-regular/48/user-male-circle--v1.png" alt="profile"/>
                </a>
                <ul>
                    <!--로그인 안했을 때는 로그인만 보여주기-->
                    <li><a sec:authorize="isAnonymous()" type="submit" th:href="@{/user/login}">로그인</a></li>
                    <!--로그인 했을 때는 마이페이지와 로그아웃만 보여주기-->
                    <li><a sec:authorize="isAuthenticated()" th:href="@{/mypage/home}">마이페이지</a></li>
                    <li>
                        <a th:href="@{/user/logout}" th:if="${#authorization.expression('isAuthenticated()')}"
                           onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                            로그아웃
                        </a>
                        <form id="logout-form" th:action="@{/user/logout}" method="POST" th:if="${#authorization.expression('isAuthenticated()')}"
                              th:with="user=${#authentication.getPrincipal().getUser()}">
                        </form>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- ★ 로그인 상태 표시 -->
    <!--<div class="container-fluid mt-3">
        &lt;!&ndash; 로그인 하지 않았을때 보여주는 화면 &ndash;&gt;
        <div sec:authorize="isAnonymous()" class="alert alert-warning alert-dismissible">
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            로그인하지 않은 상태입니다. <br>
        </div>
        &lt;!&ndash; 로그인 했을때 보여주는 화면 &ndash;&gt;
        <div sec:authorize="isAuthenticated()" class="alert alert-info alert-dismissible">
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            <div th:text="${#authentication.principal.user.username + '님 로그인 하셨습니다.'}"></div>
            &lt;!&ndash;<div sec:authentication="principal.authorities"></div>&ndash;&gt;
        </div>
    </div>-->

    </nav>
</th:block>

</html>
