<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/mypage.css">
</head>
<body>

<div th:if="${userProfile != null}" data-username="${userProfile.username}" data-id="${userProfile.id}">
    <!-- 나의 판매글 목록 -->
    <section id="myPosts">

        <h3 th:text="'총 판매글 ' + ${myPosts.size()} + ' 건 | 거래 성공 ' + ${statusOneCount} + ' 건'"></h3>

        <table class="myPostsList">
            <thead>
            <tr>
                <th>제목</th>
                <th>거래상태</th>
                <th>작성일</th>
            </tr>
            </thead>
            <tbody>
            <!-- 판매글 목록 데이터를 동적으로 추가 -->
            <tr th:each="myPost : ${myPosts}">
                <td><span id="subject" th:text="${myPost.subject}"></span></td>
                <td><span id="status" th:text="${myPost.status == 0 ? '판매중' : '판매완료'}"></span></td>
                <td><span id="regDate" th:text="${#temporals.format(myPost.regDate, 'yyyy년 MM월 dd일 HH시 mm분')}"></span></span></td>
            </tr>
            </tbody>
        </table>

        <br>

        <!-- 판매글 전체 삭제 버튼 -->
        <button class="delete-myPosts-btn" onclick="confirmDeleteAllMyPosts()">판매글 전체 삭제</button>
    </section>

    <br><br><br>

    <!-- 받은 리뷰 -->
    <section id="MyReceivedReviews">

        <h3 th:text="'받은 리뷰 ' + ${myReceivedReviews.size()} + ' 건'"></h3>

        <!-- 리뷰를 박스로 표시 -->
        <div th:each="myReceivedReview : ${myReceivedReviews}" th:class="${'reviewBox status-' + myReceivedReview.reviewChk}">
            <!-- 리뷰 확인 -->
            <div class="reviewStatus">
                <!--<span th:text="${myReceivedReview.reviewChk}"></span>-->
                <span th:text="${myReceivedReview.reviewChk == 0 ? '별로에요' : (myReceivedReview.reviewChk == 1 ? '만족해요' : (myReceivedReview.reviewChk == 2 ? '최고에요' : '알 수 없는 상태'))}"></span>
            </div>
            <!-- 리뷰 내용 -->
            <div class="reviewContent">
                <span th:text="${myReceivedReview.content}"></span>
            </div>
        </div>
    </section>

</div>

<div th:if="${userProfile == null}">
    <p>사용자 프로필을 찾을 수 없습니다.</p>
</div>

<script src="/js/mypage.js"></script>

</body>
</html>
